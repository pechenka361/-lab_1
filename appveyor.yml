image: ubuntu2204

install:
  # Обновление системы и установка Python 3.11
  - sudo apt-get update
  - sudo apt-get install -y python3.11 python3.11-distutils python3.11-venv
  - wget https://bootstrap.pypa.io/get-pip.py
  - sudo python3.11 get-pip.py

  # Создание виртуального окружения
  - python3.11 -m venv venv
  - source venv/bin/activate

  # Обновление pip
  - pip install --upgrade pip

  # Установка зависимостей
  - chmod +x ./flaskapp/st.sh
  - pip install -r ./flaskapp/requirements.txt

test_script:
  # Запуск тестов
  - cd flaskapp
  - source ../venv/bin/activate
  - ./st.sh